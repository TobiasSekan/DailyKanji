<Window x:Class="DailyKanji.Mvvm.View.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:DailyKanji.Helper"
        Title="DailyKanji"
        Width="850"
        Height="600"
        x:ClassModifier="internal"
        DataContext="{Binding Path=ViewModel,
                              RelativeSource={RelativeSource Mode=Self}}"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <local:ValueToBooleanConverter x:Key="ValueToBooleanConverter" />
    </Window.Resources>

    <Window.InputBindings>
        <KeyBinding Key="D1" Command="{Binding AnswerNumber}" CommandParameter="1" />
        <KeyBinding Key="D2" Command="{Binding AnswerNumber}" CommandParameter="2" />
        <KeyBinding Key="D3" Command="{Binding AnswerNumber}" CommandParameter="3" />
        <KeyBinding Key="D4" Command="{Binding AnswerNumber}" CommandParameter="4" />
        <KeyBinding Key="D5" Command="{Binding AnswerNumber}" CommandParameter="5" />
        <KeyBinding Key="D6" Command="{Binding AnswerNumber}" CommandParameter="6" />
        <KeyBinding Key="D7" Command="{Binding AnswerNumber}" CommandParameter="7" />
        <KeyBinding Key="D8" Command="{Binding AnswerNumber}" CommandParameter="8" />
        <KeyBinding Key="D9" Command="{Binding AnswerNumber}" CommandParameter="9" />
        <KeyBinding Key="D0" Command="{Binding AnswerNumber}" CommandParameter="0" />
        <KeyBinding Key="Backspace" Command="{Binding PreviousTest}" />
        <KeyBinding Key="Space" Command="{Binding NextTest}" />
    </Window.InputBindings>

    <Grid>
        <Grid.RowDefinitions>

            <!--  Menu  -->
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />

            <!--  Grid - Question and previous button and next button  -->
            <RowDefinition Height="150" />
            <RowDefinition Height="*" />

            <!--  StackPanel - Answer buttons  -->
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />

            <!--  DataGrid - Hiragana and Katakana list  -->
            <RowDefinition Height="200" />

            <!--  StatusBar  -->
            <RowDefinition Height="Auto" />

        </Grid.RowDefinitions>

        <Menu Grid.Row="0">

            <MenuItem Header="File">

                <MenuItem Command="{Binding Path=NextTest}" Header="Next test" InputGestureText="Space" />

                <MenuItem Command="{Binding Path=PreviousTest}"
                          Header="Previous test"
                          InputGestureText="Backspace"
                          IsEnabled="{Binding Path=Model.CanGoToLastTest}" />

                <Separator />

                <MenuItem Command="{Binding Path=CloseProgram}" Header="Close Program" InputGestureText="Alt+F4" />

            </MenuItem>

            <MenuItem Header="View">

                <MenuItem Command="{Binding Path=ChangeHintVisibility}" Header="Show hints on wrong answers" IsChecked="{Binding Path=Model.ShowHints}" />

            </MenuItem>

            <MenuItem Header="Settings">

                <MenuItem Header="Test type">

                    <MenuItem Command="{Binding Path=ChangeTestType}"
                              CommandParameter="0"
                              Header="Hiragana or Katakana to Roomaji"
                              IsChecked="{Binding Path=Model.MainTestType,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=0}" />

                    <MenuItem Command="{Binding Path=ChangeTestType}"
                              CommandParameter="1"
                              Header="Only Hiragana to Roomaji"
                              IsChecked="{Binding Path=Model.MainTestType,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=1}" />

                    <MenuItem Command="{Binding Path=ChangeTestType}"
                              CommandParameter="2"
                              Header="Only Katakana to Roomaji"
                              IsChecked="{Binding Path=Model.MainTestType,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=2}" />

                    <Separator />

                    <MenuItem Command="{Binding Path=ChangeTestType}"
                              CommandParameter="3"
                              Header="Roomaji to Hiragana or Katakana"
                              IsChecked="{Binding Path=Model.MainTestType,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=3}" />

                    <MenuItem Command="{Binding Path=ChangeTestType}"
                              CommandParameter="4"
                              Header="Only Roomaji to Hiragana"
                              IsChecked="{Binding Path=Model.MainTestType,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=4}" />

                    <MenuItem Command="{Binding Path=ChangeTestType}"
                              CommandParameter="5"
                              Header="Only Roomaji to Katakana"
                              IsChecked="{Binding Path=Model.MainTestType,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=5}" />

                    <Separator />

                    <MenuItem Command="{Binding Path=ChangeTestType}"
                              CommandParameter="6"
                              Header="Hiragana to Katakana or Katakana to Hiragana"
                              IsChecked="{Binding Path=Model.MainTestType,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=6}" />

                    <MenuItem Command="{Binding Path=ChangeTestType}"
                              CommandParameter="7"
                              Header="Only Hiragana to Katakana"
                              IsChecked="{Binding Path=Model.MainTestType,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=7}" />

                    <MenuItem Command="{Binding Path=ChangeTestType}"
                              CommandParameter="8"
                              Header="Only Katakana to Hiragana"
                              IsChecked="{Binding Path=Model.MainTestType,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=8}" />
                </MenuItem>

                <MenuItem Header="Possible answers">

                    <MenuItem Command="{Binding Path=ChangeAnswerCount}"
                              CommandParameter="2"
                              Header="Two answers"
                              IsChecked="{Binding Path=Model.MaximumAnswer,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=2}" />

                    <MenuItem Command="{Binding Path=ChangeAnswerCount}"
                              CommandParameter="3"
                              Header="Three answers"
                              IsChecked="{Binding Path=Model.MaximumAnswer,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=3}" />

                    <MenuItem Command="{Binding Path=ChangeAnswerCount}"
                              CommandParameter="4"
                              Header="Four answers"
                              IsChecked="{Binding Path=Model.MaximumAnswer,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=4}" />

                    <MenuItem Command="{Binding Path=ChangeAnswerCount}"
                              CommandParameter="5"
                              Header="Five answers"
                              IsChecked="{Binding Path=Model.MaximumAnswer,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=5}" />

                    <MenuItem Command="{Binding Path=ChangeAnswerCount}"
                              CommandParameter="6"
                              Header="Six answers"
                              IsChecked="{Binding Path=Model.MaximumAnswer,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=6}" />

                    <MenuItem Command="{Binding Path=ChangeAnswerCount}"
                              CommandParameter="7"
                              Header="Seven answers"
                              IsChecked="{Binding Path=Model.MaximumAnswer,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=7}" />

                    <MenuItem Command="{Binding Path=ChangeAnswerCount}"
                              CommandParameter="8"
                              Header="Eight answers"
                              IsChecked="{Binding Path=Model.MaximumAnswer,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=8}" />

                    <MenuItem Command="{Binding Path=ChangeAnswerCount}"
                              CommandParameter="9"
                              Header="Nine answers"
                              IsChecked="{Binding Path=Model.MaximumAnswer,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=9}" />

                    <MenuItem Command="{Binding Path=ChangeAnswerCount}"
                              CommandParameter="10"
                              Header="Ten answers"
                              IsChecked="{Binding Path=Model.MaximumAnswer,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=10}" />

                </MenuItem>

                <MenuItem Header="Error timeout">

                    <MenuItem Command="{Binding Path=ChangeErrorTimeout}"
                              CommandParameter="500"
                              Header="Zero point five second"
                              IsChecked="{Binding Path=Model.ErrorTimeout,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=500}" />

                    <MenuItem Command="{Binding Path=ChangeErrorTimeout}"
                              CommandParameter="1000"
                              Header="One second"
                              IsChecked="{Binding Path=Model.ErrorTimeout,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=1000}" />

                    <MenuItem Command="{Binding Path=ChangeErrorTimeout}"
                              CommandParameter="1500"
                              Header="One point five second"
                              IsChecked="{Binding Path=Model.ErrorTimeout,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=1500}" />

                    <MenuItem Command="{Binding Path=ChangeErrorTimeout}"
                              CommandParameter="2000"
                              Header="Two seconds"
                              IsChecked="{Binding Path=Model.ErrorTimeout,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=2000}" />

                    <MenuItem Command="{Binding Path=ChangeErrorTimeout}"
                              CommandParameter="2500"
                              Header="Two point five second"
                              IsChecked="{Binding Path=Model.ErrorTimeout,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=2500}" />

                    <MenuItem Command="{Binding Path=ChangeErrorTimeout}"
                              CommandParameter="3000"
                              Header="Three seconds"
                              IsChecked="{Binding Path=Model.ErrorTimeout,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=3000}" />

                    <MenuItem Command="{Binding Path=ChangeErrorTimeout}"
                              CommandParameter="3500"
                              Header="Three point five second"
                              IsChecked="{Binding Path=Model.ErrorTimeout,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=3500}" />

                    <MenuItem Command="{Binding Path=ChangeErrorTimeout}"
                              CommandParameter="4000"
                              Header="Four seconds"
                              IsChecked="{Binding Path=Model.ErrorTimeout,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=4000}" />

                    <MenuItem Command="{Binding Path=ChangeErrorTimeout}"
                              CommandParameter="4500"
                              Header="Four point five second"
                              IsChecked="{Binding Path=Model.ErrorTimeout,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=4500}" />

                    <MenuItem Command="{Binding Path=ChangeErrorTimeout}"
                              CommandParameter="5000"
                              Header="Five seconds"
                              IsChecked="{Binding Path=Model.ErrorTimeout,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=5000}" />

                    <MenuItem Command="{Binding Path=ChangeErrorTimeout}"
                              CommandParameter="5500"
                              Header="Five point five second"
                              IsChecked="{Binding Path=Model.ErrorTimeout,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=5500}" />

                    <MenuItem Command="{Binding Path=ChangeErrorTimeout}"
                              CommandParameter="6000"
                              Header="Six seconds"
                              IsChecked="{Binding Path=Model.ErrorTimeout,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=6000}" />

                    <MenuItem Command="{Binding Path=ChangeErrorTimeout}"
                              CommandParameter="6500"
                              Header="Six point five second"
                              IsChecked="{Binding Path=Model.ErrorTimeout,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=6500}" />

                    <MenuItem Command="{Binding Path=ChangeErrorTimeout}"
                              CommandParameter="7000"
                              Header="Seven seconds"
                              IsChecked="{Binding Path=Model.ErrorTimeout,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=7000}" />

                    <MenuItem Command="{Binding Path=ChangeErrorTimeout}"
                              CommandParameter="7500"
                              Header="Six point five second"
                              IsChecked="{Binding Path=Model.ErrorTimeout,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=7500}" />

                    <MenuItem Command="{Binding Path=ChangeErrorTimeout}"
                              CommandParameter="8000"
                              Header="Eight seconds"
                              IsChecked="{Binding Path=Model.ErrorTimeout,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=8000}" />

                    <MenuItem Command="{Binding Path=ChangeErrorTimeout}"
                              CommandParameter="8500"
                              Header="Eight point five second"
                              IsChecked="{Binding Path=Model.ErrorTimeout,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=8500}" />

                    <MenuItem Command="{Binding Path=ChangeErrorTimeout}"
                              CommandParameter="9000"
                              Header="Nine seconds"
                              IsChecked="{Binding Path=Model.ErrorTimeout,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=9000}" />

                    <MenuItem Command="{Binding Path=ChangeErrorTimeout}"
                              CommandParameter="9500"
                              Header="Nine point five second"
                              IsChecked="{Binding Path=Model.ErrorTimeout,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=9500}" />

                    <MenuItem Command="{Binding Path=ChangeErrorTimeout}"
                              CommandParameter="10000"
                              Header="Ten seconds"
                              IsChecked="{Binding Path=Model.ErrorTimeout,
                                                  Converter={StaticResource ValueToBooleanConverter},
                                                  ConverterParameter=10000}" />

                </MenuItem>

                <MenuItem Command="{Binding Path=ChangeAnswerMode}"
                          Header="Similar answers"
                          IsCheckable="True"
                          IsChecked="{Binding Path=Model.SimilarAnswers}" />

            </MenuItem>

            <MenuItem Header="Statistic">

                <MenuItem Command="{Binding Path=RestCompleteStatistic}" Header="Reset the complete statistic" />

            </MenuItem>

            <MenuItem x:Name="AnswerMenu" Header="Answers" />

        </Menu>

        <Grid Grid.Row="2" Height="200">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="200" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0"
                    Width="100"
                    Height="50"
                    Margin="5"
                    Command="{Binding Path=PreviousTest}"
                    Content="Previous test"
                    IsEnabled="{Binding Path=Model.CanGoToLastTest}" />

            <TextBlock Grid.Column="2"
                       Width="200"
                       HorizontalAlignment="Center"
                       Background="{Binding Path=Model.CurrentAskSignColor}"
                       FontSize="100"
                       Text="{Binding Path=Model.CurrentAskSign}"
                       TextAlignment="Center" />

            <StackPanel Grid.Column="3" Margin="10">
                <TextBlock Text="Wrong answers" />
                <TextBlock Text="{Binding Path=Model.WrongCount}" />
                <TextBlock Text="Correct answers" />
                <TextBlock Text="{Binding Path=Model.CorrectCount}" />
                <TextBlock Text="Average answer time" />
                <TextBlock Text="{Binding Path=Model.AverageAnswerTime}" />
            </StackPanel>

            <Button Grid.Column="5"
                    Width="100"
                    Height="50"
                    Margin="5"
                    Command="{Binding Path=NextTest}"
                    Content="Next test" />
        </Grid>

        <StackPanel x:Name="AnswerButtonArea"
                    Grid.Row="4"
                    HorizontalAlignment="Center"
                    Orientation="Horizontal" />

        <DataGrid Grid.Row="6"
                  Margin="5"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  CanUserReorderColumns="False"
                  CanUserResizeColumns="False"
                  CanUserResizeRows="False"
                  HeadersVisibility="Column"
                  ItemsSource="{Binding Path=Model.AllTestsList}">

            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding Path=Roomaji}" Header="Roomaji" IsReadOnly="True" />
                <DataGridTextColumn Binding="{Binding Path=Hiragana}" Header="Hiragana" IsReadOnly="True" />
                <DataGridTextColumn Binding="{Binding Path=Katakana}" Header="Katakana" IsReadOnly="True" />
                <DataGridTextColumn Binding="{Binding Path=WrongHiraganaCount}" Header="Wrong Hiragana" IsReadOnly="True" />
                <DataGridTextColumn Binding="{Binding Path=WrongKatakanaCount}" Header="Wrong Katakana" IsReadOnly="True" />
                <DataGridTextColumn Binding="{Binding Path=CorrectHiraganaCount}" Header="Correct Hiragana" IsReadOnly="True" />
                <DataGridTextColumn Binding="{Binding Path=CorrectKatakanaCount}" Header="Correct Katakana" IsReadOnly="True" />
                <DataGridTextColumn Binding="{Binding Path=AverageAnswerTimeForHiragana, StringFormat=mm\\:ss\\.ff}" Header="Time Hiragana" IsReadOnly="True" />
                <DataGridTextColumn Binding="{Binding Path=AverageAnswerTimeForKatakana, StringFormat=mm\\:ss\\.ff}" Header="Time Katakana" IsReadOnly="True" />
            </DataGrid.Columns>

        </DataGrid>

        <StatusBar Grid.Row="7">

            <StatusBar.ItemsPanel>
                <ItemsPanelTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                    </Grid>
                </ItemsPanelTemplate>
            </StatusBar.ItemsPanel>

            <StatusBarItem Grid.Column="0" HorizontalContentAlignment="Center">

                <StackPanel Orientation="Horizontal">

                    <TextBlock Text="Correct answers: " />

                    <TextBlock Text="{Binding Path=Model.RightAnswerCountString}" />

                </StackPanel>

            </StatusBarItem>

            <Separator Grid.Column="1" />

            <StatusBarItem Grid.Column="2" HorizontalContentAlignment="Center">

                <StackPanel Orientation="Horizontal">

                    <TextBlock Text="Wrong answers: " />
                    <TextBlock Text="{Binding Path=Model.WrongAnswerCountString}" />

                </StackPanel>

            </StatusBarItem>

            <Separator Grid.Column="3" />

            <StatusBarItem Grid.Column="4" HorizontalContentAlignment="Center">

                <StackPanel Orientation="Horizontal">

                    <TextBlock Text="Rate: " />
                    <TextBlock Text="{Binding Path=Model.CurrentRateText}" />

                </StackPanel>

            </StatusBarItem>

            <Separator Grid.Column="5" />

            <StatusBarItem Grid.Column="6" HorizontalContentAlignment="Center">

                <StackPanel Orientation="Horizontal">

                    <TextBlock Text="Question pool: " />
                    <TextBlock Text="{Binding Path=Model.NewQuestionList.Count}" />

                </StackPanel>

            </StatusBarItem>

            <Separator Grid.Column="7" />

            <StatusBarItem Grid.Column="8" HorizontalContentAlignment="Center">

                <StackPanel Orientation="Horizontal">

                    <TextBlock Text="Test type: " />
                    <TextBlock Text="{Binding Path=Model.TestTypeString}" />

                </StackPanel>

            </StatusBarItem>

        </StatusBar>

    </Grid>

</Window>
